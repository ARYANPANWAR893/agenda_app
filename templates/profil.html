{% extends 'base.html' %}

{% block content %}
<div class="container login-container">
  <div class="row justify-content-center">
    <div class="col-md-6">
      <div class="card">
        <div class="card-header bg-secondary text-white text-center">
          Mon Profil
        </div>
        <div class="card-body">
          {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
              {% for category, message in messages %}
                <div class="alert alert-{{ category }}">{{ message }}</div>
              {% endfor %}
            {% endif %}
          {% endwith %}
          <form method="POST">
            <div class="form-group">
              <label for="username">Nom d'utilisateur</label>
              <!-- Champ username visible mais désactivé si nécessaire -->
              <input type="text" id="username" name="username" value="{{ user.username }}" class="form-control" disabled />
          
              <!-- Champ caché pour envoyer le username même s'il est désactivé -->
              <input type="hidden" name="username" value="{{ user.username }}" />
            </div>
          
            <div class="form-group">
              <label for="email">Email</label>
              <input type="email" id="email" name="email" value="{{ user.email }}" class="form-control" />
            </div>
          
            <div class="form-group">
              <label for="role">Rôle / Fonction</label>
              <select id="role" name="role" class="form-control">
                <option value="Comptable" {% if user.role == 'Comptable' %}selected{% endif %}>Comptable</option>
                <option value="Manager" {% if user.role == 'Manager' %}selected{% endif %}>Manager</option>
                <option value="Juridique" {% if user.role == 'Juridique' %}selected{% endif %}>Juridique</option>
                <option value="Communication" {% if user.role == 'Communication' %}selected{% endif %}>Communication</option>
                <option value="Audit" {% if user.role == 'Audit' %}selected{% endif %}>Audit</option>
                <option value="Autre" {% if user.role == 'Autre' %}selected{% endif %}>Autre</option>
                <option value="Direction" {% if user.role == 'Direction' %}selected{% endif %}>Direction</option>
              </select>
            </div>
          
            <button type="submit" class="btn btn-primary mt-3">Mettre à jour</button>
          </form>
          
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}
